<!DOCTYPE html>
<html>

  <script id="vertex-shader" type="x-shader/x-vertex">

    attribute vec4 vPosition;
    attribute vec4 vColor;

    attribute vec2 a_texcoord;

    varying vec4 fColor;

    varying vec2 v_texcoord;

    uniform vec3 theta;
    uniform mat4 model;

    void main()
    {
    
        vec3 angles = radians(theta);
        vec3 c = cos(angles);
        vec3 s = sin(angles);

        // Remember: thse matrices are column-major
        mat4 rx = mat4( 1.0,  0.0,  0.0, 0.0,
                       0.0,  c.x,  s.x, 0.0,
		       0.0, -s.x,  c.x, 0.0,
		       0.0,  0.0,  0.0, 1.0 );

        mat4 ry = mat4( c.y, 0.0, -s.y, 0.0,
			0.0, 1.0,  0.0, 0.0,
			s.y, 0.0,  c.y, 0.0,
			0.0, 0.0,  0.0, 1.0 );

	mat4 rz = mat4( c.z, s.z, 0.0, 0.0,
			-s.z,  c.z, 0.0, 0.0,
			0.0,  0.0, 1.0, 0.0,
			0.0,  0.0, 0.0, 1.0 );

	mat4 view = rz * ry * rx;

        fColor = vColor;

	gl_Position = view  * model * vPosition;
        gl_Position.z = -gl_Position.z;

        v_texcoord = a_texcoord;

    }
    
  </script>

  <script id="fragment-shader" type="x-shader/x-fragment">

    precision mediump float;
      
    varying vec4 fColor;

    varying vec2 v_texcoord;

    uniform sampler2D u_texture;
    
    void main()
    {
    
       gl_FragColor = texture2D(u_texture, v_texcoord) * fColor;

    }
    
  </script>

  <script type="text/javascript" src="webgl-utils.js"></script>
  <script type="text/javascript" src="initShaders.js"></script>
  <script type="text/javascript" src="MV.js"></script>
  <script type="text/javascript" src="bullethell.js"></script>

  <body>
    
    <canvas id="gl-canvas" width="400" height="400">
      Oops ... your browser doesn't support the HTML5 canvas element
    </canvas>

  </body>
  
</html>
